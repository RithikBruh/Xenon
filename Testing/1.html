<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Web Terminal</title>
  <style>
    :root{
      --bg:#071019; /* deep blue-black */
      --panel:#000; 
      --text:#8dfd9b; /* green-ish */
      --muted:#4b6b7a;
      --accent:#33ffcc;
      --prompt-color:#7cf2b6;
    }
    html,body{height:100%;}
    body{
      margin:0; 
      background: radial-gradient(1200px 600px at 10% 10%, rgba(0,60,40,0.12), transparent), var(--bg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Source Code Pro", monospace;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;align-items:flex-start;justify-content:flex-start;padding:8px;box-sizing:border-box;
    }
    .frame{
      width:100%;max-width:980px;height:640px;border-radius:12px;overflow:hidden;box-shadow:0 30px 60px rgba(2,6,10,0.6), inset 0 2px 0 rgba(255,255,255,0.02);
      background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.9));
      border:1px solid rgba(255,255,255,0.03);
      display:flex;flex-direction:column;
    }
    .toolbar{height:42px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);display:flex;align-items:center;padding:8px 12px;gap:8px}
    .dot{width:12px;height:12px;border-radius:50%}
    .dot.red{background:#ff5f56}
    .dot.yellow{background:#ffbd2e}
    .dot.green{background:#27c93f}
    .title{color:var(--muted);font-size:13px;margin-left:8px}
    #terminal{
      flex:1;padding:18px 18px 24px 18px;overflow:auto;outline:none;position:relative; 
      font-size:15px;line-height:1.5;white-space:pre-wrap;tab-size:4;
    }
    .line{display:block}
    .prompt{color:var(--prompt-color);margin-right:8px}
    .input{
      background:transparent;border:0;outline:0;color:var(--text);font:inherit;width:calc(100% - 120px);
      caret-color:var(--accent);
    }
    .cursor{
      display:inline-block;width:8px;height:18px;background:var(--text);opacity:0.9;margin-left:2px;vertical-align:middle; animation:blink .9s steps(1) infinite;
    }
    @keyframes blink{50%{opacity:0}}
    .output{color:var(--muted);margin-left:8px}
    .muted{color:var(--muted)}
    /* faux CRT scanlines */
    .frame::after{content:"";position:absolute;pointer-events:none;inset:0;background-image:linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px);background-size:100% 3px;mix-blend-mode:overlay}
    /* selection */
    #terminal ::selection{background:rgba(60,255,180,0.14)}
    /* small helpers */
    .help{position:absolute;right:12px;bottom:12px;font-size:12px;color:var(--muted)}
    .hidden-input{position:fixed;left:-9999px}
    /* responsive */
    @media (max-width:600px){.frame{height:80vh;padding:0}}
  </style>
</head>
<body>
  <div class="frame" role="application" aria-label="Web terminal">
    <div class="toolbar" aria-hidden="true">
      <div style="display:flex;align-items:center">
        <div class="dot red"></div>
        <div class="dot yellow" style="margin-left:8px"></div>
        <div class="dot green" style="margin-left:8px"></div>
      </div>
      <div class="title">~ web-terminal</div>
    </div>

    
    <div id="terminal" tabindex="0"></div>
    <div class="help">Enter — send · ↑/↓ — history · Ctrl+L — clear · Ctrl+C — cancel</div>
  </div>

  <script>
    const terminal = document.getElementById('terminal');
    const PROMPT = 'user@web:~$';
    let history = [];
    let historyIndex = -1;

    function createPromptLine(focus=true){
      const line = document.createElement('div');
      line.className = 'line';
      const p = document.createElement('span');
      p.className = 'prompt';
      p.textContent = PROMPT;
      const input = document.createElement('span');
      input.className = 'input';
      input.contentEditable = 'true';
      input.spellcheck = false;
      input.setAttribute('role','textbox');
      input.setAttribute('aria-label','Terminal input');
      input.addEventListener('keydown', onInputKeyDown);
      input.addEventListener('paste', onPaste);
      line.appendChild(p);
      line.appendChild(input);
      const cursor = document.createElement('span');
      cursor.className = 'cursor';
      line.appendChild(cursor);
      terminal.appendChild(line);
      if(focus){
        placeCaretAtEnd(input);
        input.focus();
      }
      scrollToBottom();
      return input;
    }

    function placeCaretAtEnd(el){
      const range = document.createRange();
      const sel = window.getSelection();
      range.selectNodeContents(el);
      range.collapse(false);
      sel.removeAllRanges();
      sel.addRange(range);
    }

    function onPaste(e){
      e.preventDefault();
      const text = (e.clipboardData || window.clipboardData).getData('text');
      document.execCommand('insertText', false, text);
    }

    function onInputKeyDown(e){
      const input = e.currentTarget;
      if(e.key === 'Enter'){
        e.preventDefault();
        const cmd = input.innerText.replace(/\u00A0/g,' ').trimEnd();
        if(cmd.length === 0){
          pushOutput('');
          input.parentElement.querySelector('.cursor').remove();
          createPromptLine();
          historyIndex = history.length;
          return;
        }
        history.push(cmd);
        historyIndex = history.length;
        input.contentEditable = 'false';
        input.classList.add('muted');
        input.parentElement.querySelector('.cursor').remove();
        pushOutput('\n' + cmd);
        createPromptLine();
      } else if(e.key === 'ArrowUp'){
        e.preventDefault();
        if(history.length === 0) return;
        historyIndex = Math.max(0, historyIndex - 1);
        input.innerText = history[historyIndex] || '';
        placeCaretAtEnd(input);
      } else if(e.key === 'ArrowDown'){
        e.preventDefault();
        if(history.length === 0) return;
        historyIndex = Math.min(history.length, historyIndex + 1);
        input.innerText = historyIndex === history.length ? '' : (history[historyIndex] || '');
        placeCaretAtEnd(input);
      } else if(e.key === 'Tab'){
        e.preventDefault();
        document.execCommand('insertText', false, '    ');
      } else if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'l'){
        e.preventDefault();
        clearTerminal();
      } else if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'c'){
        e.preventDefault();
        input.contentEditable = 'false';
        input.classList.add('muted');
        input.parentElement.querySelector('.cursor').remove();
        const caret = document.createElement('div');
        caret.className = 'line';
        caret.innerHTML = '<span class="output">^C</span>';
        terminal.appendChild(caret);
        createPromptLine();
      }
    }

    function pushOutput(text){
      if(text.startsWith('\n')) text = text.slice(1);
      const lines = text.split('\n');
      for(const ln of lines){
        const out = document.createElement('div');
        out.className = 'line output';
        out.textContent = ln;
        terminal.appendChild(out);
      }
      scrollToBottom();
    }

    function clearTerminal(){
      terminal.innerHTML = '';
      createPromptLine(false);
    }

    function scrollToBottom(){
      terminal.scrollTop = terminal.scrollHeight;
    }

    pushOutput('Welcome to the web terminal emulator — no custom commands installed.');
    pushOutput('Type anything and press Enter. Use \u2191 / \u2193 to browse history.');
    createPromptLine();

    document.querySelector('.frame').addEventListener('click', (e)=>{
      const inputs = terminal.querySelectorAll('.input[contenteditable="true"]');
      if(inputs.length) inputs[inputs.length-1].focus();
    });

    terminal.addEventListener('focus', ()=>{
      const inputs = terminal.querySelectorAll('.input[contenteditable="true"]');
      if(inputs.length) inputs[inputs.length-1].focus();
    });

    historyIndex = history.length;
  </script>
</body>
</html>
